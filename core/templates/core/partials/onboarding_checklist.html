{# Checklist de onboarding para usuarios trial #}
{% load static %}

<div id="onboarding-checklist" class="bg-blue-50 border border-blue-200 rounded-lg p-5 mb-6 shadow-sm">
    <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-blue-800">
            <i class="fas fa-rocket mr-2"></i>Primeros pasos en SAM
        </h3>
        <button onclick="document.getElementById('onboarding-checklist').style.display='none'"
                class="text-blue-400 hover:text-blue-600 text-sm" title="Ocultar">
            <i class="fas fa-times"></i>
        </button>
    </div>

    {# Barra de progreso #}
    <div class="mb-4">
        <div class="flex justify-between text-sm text-blue-700 mb-1">
            <span>Progreso</span>
            <span>{{ onboarding_progress.pasos_completados }}/{{ onboarding_progress.total_pasos }}</span>
        </div>
        <div class="w-full bg-blue-200 rounded-full h-3">
            <div class="h-3 rounded-full transition-all duration-500
                        {% if onboarding_progress.porcentaje == 100 %}bg-green-500
                        {% elif onboarding_progress.porcentaje >= 66 %}bg-blue-600
                        {% elif onboarding_progress.porcentaje >= 33 %}bg-blue-500
                        {% else %}bg-blue-400{% endif %}"
                 style="width: {{ onboarding_progress.porcentaje }}%"></div>
        </div>
    </div>

    {# Lista de pasos #}
    <ul class="space-y-3 mb-4">
        {# Paso 1: Crear equipo #}
        <li class="flex items-center gap-3">
            {% if onboarding_progress.paso_crear_equipo %}
                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center">
                    <i class="fas fa-check text-white text-xs"></i>
                </span>
                <span class="text-green-700 line-through">Crear tu primer equipo</span>
            {% else %}
                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center">
                    <span class="text-gray-500 text-xs font-bold">1</span>
                </span>
                <a href="{% url 'core:aÃ±adir_equipo' %}" class="text-blue-700 hover:text-blue-900 font-medium hover:underline">
                    Crear tu primer equipo
                </a>
            {% endif %}
        </li>

        {# Paso 2: Registrar calibracion #}
        <li class="flex items-center gap-3">
            {% if onboarding_progress.paso_registrar_calibracion %}
                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center">
                    <i class="fas fa-check text-white text-xs"></i>
                </span>
                <span class="text-green-700 line-through">Registrar una calibracion</span>
            {% else %}
                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center">
                    <span class="text-gray-500 text-xs font-bold">2</span>
                </span>
                <span class="text-gray-600">Registrar una calibracion</span>
                {% if not onboarding_progress.paso_crear_equipo %}
                    <span class="text-xs text-gray-400 italic">(requiere equipo)</span>
                {% endif %}
            {% endif %}
        </li>

        {# Paso 3: Generar reporte #}
        <li class="flex items-center gap-3">
            {% if onboarding_progress.paso_generar_reporte %}
                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center">
                    <i class="fas fa-check text-white text-xs"></i>
                </span>
                <span class="text-green-700 line-through">Generar un reporte PDF</span>
            {% else %}
                <span class="flex-shrink-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center">
                    <span class="text-gray-500 text-xs font-bold">3</span>
                </span>
                <span class="text-gray-600">Generar un reporte PDF</span>
                {% if not onboarding_progress.paso_crear_equipo %}
                    <span class="text-xs text-gray-400 italic">(requiere equipo)</span>
                {% endif %}
            {% endif %}
        </li>
    </ul>

    {# Boton repetir tour #}
    <div class="flex gap-3">
        <button onclick="iniciarTourOnboarding()"
                class="inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors">
            <i class="fas fa-play-circle mr-1"></i> Repetir tour completo
        </button>
    </div>
</div>
